<html>
	<head>
		<title>Kenshi Modding 101: FCS and Dialogue</title>
		<link href="../../../../static\site-styles\valve\steam.css" rel="stylesheet" type="text/css"/>
		<style>
			#content h3
			{
				text-decoration: underline rgb(150, 150, 150) solid 1px;
			}
			
			.alphalist:is(.sublist)
			{
				counter-reset: alphalist-item;
			}
			.alphalist:not(.sublist)
			{
				counter-reset: alphalist-item calc(var(--ol-start, 1) - 1);
			}
			.alphalist ol.numberlist
			{
				margin: 0;
				padding: 0;
			}
			.alphalist > li
			{
				counter-increment: alphalist-item;
			}
			.alphalist:is(.dashmarker) > li::marker
			{
				content:
					counter(alphalist-item, upper-alpha)
					" - ";
			}
			.alphalist:is(.parenmarker) > li::marker
			{
				content:
					counter(alphalist-item, upper-alpha)
					") ";
			}
			.alphalist:is(.dashmarker) ol.numberlist > li::marker
			{
				content:
					counter(alphalist-item, upper-alpha)
					counter(numberlist-item, decimal)
					" - ";
			}
			.alphalist:is(.parenmarker) ol.numberlist > li::marker
			{
				content:
					counter(alphalist-item, upper-alpha)
					counter(numberlist-item, decimal)
					") ";
			}
			
			.numberlist:is(.sublist)
			{
				counter-reset: numberlist-item;
			}
			.numberlist:not(.sublist)
			{
				counter-reset: numberlist-item calc(var(--ol-start, 1) - 1);
			}
			.numberlist ol.alphalist
			{
				margin: 0;
				padding: 0;
			}
			.numberlist > li
			{
				counter-increment: numberlist-item;
			}
			.numberlist:is(.dashmarker) > li::marker
			{
				content:
					counter(numberlist-item, decimal)
					" - ";
			}
			.numberlist:is(.parenmarker) > li::marker
			{
				content:
					counter(numberlist-item, decimal)
					") ";
			}
			.numberlist:is(.dashmarker) ol.alphalist > li::marker
			{
				content:
					counter(numberlist-item, decimal)
					counter(alphalist-item, upper-alpha)
					" - ";
			}
			.numberlist:is(.parenmarker) ol.alphalist > li::marker
			{
				content:
					counter(numberlist-item, decimal)
					counter(alphalist-item, upper-alpha)
					") ";
			}
			
			.portrait-left
			{
				display: grid;
				grid-auto-columns: min-content 1fr;
				grid-column-gap: 5px;
				align-items: center;
			}
			.portrait-left > img
			{
				max-width: 311px !important;
			}
			.portrait-left > p
			{
				grid-column: 2;
				grid-row: 1;
				
				font-style: italic;
			}

			.portrait-right
			{
				text-align: right;
				
				display: grid;
				grid-auto-columns: 1fr min-content;
				grid-column-gap: 5px;
				align-items: center;
			}
			.portrait-right > img
			{
				grid-column: 2;
				grid-row: 1;
				max-width: 311px  !important;
			}
			.portrait-right > p
			{
				grid-column: 1;
				grid-row: 1;
				
				font-style: italic;
			}
		</style>
	</head>
	<body>
		<nav id="breadcrumb">
			<a href="../../../../index.html">Home</a> >
			<a href="../../../index.html">Kenshi</a> >
			<a href="../../index.html">Guides</a> >
			<a href="../index.html">Modding</a>
		</nav>
		<main>
			<header id="overview">
				<img src="boronthumb.jpg" alt="Sillouette of a Hiver with the caption FCS 101 Dialogue"/>
				<h1>Kenshi Modding 101: FCS and Dialogue</h1>
				<address>By <a rel="author">Boron</a></address>
				<div class="dotted-line"></div>
				<section>
					<p>Hello, no-hive! I am Boron! We Hivers are most familiar with the FCS, oh yes! /QUICKLAUGH/</p>
					<p>...This guide is the first in a three-part series that provide step-by-step instructions on using the FCS to mod Kenshi. It comes complete with links to a tutorial mod that shows you everything in action and includes various exercises for you to follow and try out on your own, with simple reference material explaining what is happening and why.</p>
					<p>By the end of the tutorial, you should:</p>
					<ul>
						<li>Understand the layout of the FCS</li>
						<li>Know how to search for anything in the FCS, by searching, using your own tags, and finding references</li>
						<li>Know how to create new mods, review mod changes, and alter global game settings</li>
						<li>Be able to create your own characters, squads, and game starts</li>
						<li>Be able to alter existing characters, squads, and game starts</li>
						<li>Understand the fundamentals of the dialogue system - wordswaps, dialogue packages, dialogue, triggers, and characters</li>
						<li>Have built a fully-functioning bar in your game world to put all the screenshots, tutorial-esque drivel, swearing, hair-pulling, and general theory into practice.</li>
					</ul>
					<p>...Bidding you good fortune, human!</p>
					<p><a href="NewTownsMod.zip">MOD LINK</a></p>
				</section>
			</header>
			<div id="sidebar">
				<aside id="infobar" class="sidebar">
					<section>
						<div class="sidebar-title">Created by</div>
						<div id="author">
							<img src="boron.jpg" alt="Boron's Avatar"/>
							<address><a rel="author">Boron</a></address>
						</div>
					</section>
					<hr/>
					<section>
						<p><span class="tags-title">Category:</span> <a>Modding or Configuration</a>, <a>Walkthroughs</a>, <a>Workshop</a></p>
						<p><span class="tags-title">Languages:</span> <a>English</a></p>
					</section>
					<hr/>
					<section id="timestamp">
						<span>Posted</span>
						<time datetime=2018-07-18T18:06>Jul 18, 2018 @ 6:06pm</time>
						<span>Updated</span>
						<time datetime=2018-07-20T04:06>Jul 20, 2018 @ 4:06am</time>
					</section>
				</aside>
				<aside id="toc" class="sidebar">
					<section>
						<div class="sidebar-title">Guide Index</div>
					</section>
					<hr/>
					<section>
						<nav>
							<ul>
								<li><a href="#overview">Overview</a></li>
								<hr/>
								<li><a href="#borongorax">Boron and Gorax</a></li>
								<li><a href="#thebasics">FCS: The Basics</a></li>
								<li><a href="#userinterface">FCS: User Interface</a></li>
								<li><a href="#fcsmodifyingglobalstuff">FCS: Modifying Global Stuff</a></li>
								<li><a href="#dialogueoverview">Dialogue: Overview</a></li>
								<li><a href="#dialogueexercises">Dialogue: Exercises</a></li>
								<li><a href="#makingabar">Bringing it All Together: Making a Bar</a></li>
								<li><a href="#appendixa">Appendix A: Assigning Squads to Buildings and Giving them Layouts</a></li>
								<li><a href="#appendixb">Appendix B: Exercise Answer Sheet</a></li>
								<li><a href="#appendixc">Appendix C: A Proper Example</a></li>
								<hr/>
								<li><a><s>Comments</s></a></li>
							</ul>
						</nav>
					</section>
				</aside>
			</div>
			<article id="content">
				<section>
					<h2 id="borongorax">Boron and Gorax</h2>
					<blockquote class="portrait-left">
						<img src="drone1.png" alt="Portrait of Boron, a Hive Drone"/>
						<p>
							Human! Let me share my wisdom!
							<br/>
							I have valuable knowledge to import!
						</p>
					</blockquote>
					<br/>
					<blockquote class="portrait-right">
						<img src="drone2.png" alt="Portrait of Gorax, a Hive Drone"/>
						<p>
							Ugh. As if the HUMAN could understand ANYTHING...
							<br/>
							Go home, no-hiver!
						</p>
					</blockquote>
					<br/>
					<blockquote class="portrait-left">
						<img src="drone1.png" alt="Portrait of Boron, a Hive Drone"/>
						<p>
							Quiet!
							<br/>
							Welcome, human, to Boron's Authentic Kenshi Modding Tutorial!
						</p>
					</blockquote>
					<br/>
					<blockquote class="portrait-right">
						<img src="drone2.png" alt="Portrait of Gorax, a Hive Drone"/>
						<p>
							*Cough* *Cough*
							<br/>
							/LAUGH/
						</p>
					</blockquote>
					<br/>
					<blockquote class="portrait-left">
						<img src="drone1.png" alt="Portrait of Boron, a Hive Drone"/>
						<p>
							Silence, you fool! Do the......THING!
						</p>
					</blockquote>
					<br/>
					<br/>
					<b>***FANFARE MUSIC***</b>
					<br/>
					<br/>
					<blockquote class="portrait-right">
						<img src="drone2.png" alt="Portrait of Gorax, a Hive Drone"/>
						<p>
							...
						</p>
					</blockquote>
					<br/>
					<br/>
					<b>BORON'S AUTHENTIC KENSHI MODDING TUTORIAL</b>
					<br/>
					<br/>
					<small class="blackout">Nosy one, aren't you?</small>
					<br/>
					<br/>
					<br/>
					<h3>SUPPORTING MOD</h3>
					<br/>
					<br/>
					<p>This guide comes with a supporting mod that can be found <a href="NewTownsMod.zip">here</a>. Import the mod into your fcs, open it up, and look at the examples given there for much of how dialogue works. There are also some exercises, but leave those for later. Lastly, the dialogue contains all of the content made during the tutorial process - you can see it in the fcs; and you can try it out by starting a new game and selecting the 'Boron's Bar' start.</p>
					<p>EDIT: To import a mod into the FCS, first find the mod folder. Steam conveniently dumps things in folders that are numbered-only, but the directory you want is ...steam/steamapps/workshop/content/233860/
					<br/>
					-&gt; find the folder numbered '1444748032', and copy it to ..steam/steamapps/common/Kenshi/mods
					<br/>
					-&gt; rename the folder from the number to the name of the file inside it (NewTownsMod)
					<br/>
					=&gt; You should now be able to load the mod in the FCS</p>
					<br/>
				</section>
				<section>
					<h2 id="thebasics">FCS: The Basics</h2>
					<blockquote class="portrait-left">
						<img src="drone1.png" alt="Portrait of Boron, a Hive Drone"/>
						<p>
							Human! To begin, you must understand the FCS modding tool. Only the brightest and most gifted among you will understand the wisdom that I impart.
							<br/>
							If you should count yourself among them, then consider yourself lucky...the rest are jus' bug juice-swillin' GARRU herders...
						</p>
					</blockquote>
					<br/>
					<blockquote class="portrait-right">
						<img src="drone2.png" alt="Portrait of Gorax, a Hive Drone"/>
						<p>
							Way to kill it dead straight away, ya peg leg!
						</p>
					</blockquote>
					<br/>
					<br/>
					<h3>CONSIDERATIONS</h3>
					<br/>
					<br/>
					<p>Whatever you do, there are several steps you should consider to ensure that you don't accidentally do something you don't want to.</p>
					<ul>
						<li>Make SURE you're editing the right mod file. If you load multiple, you can edit items and stuff from other mods, but those changes will be saved to the currently-active mod! You can see what stuff the active mod does by pressing 'changes' at the top panel, or by looking for green and blue entries.</li>
						<li>Consider uploading your mod to the Steam Workshop right away, even as a private file. That way, you've got a secure backup that you can download easily. Note that you have to start the FCS from within Steam in order to upload anything to the workshop.</li>
						<li>It's good practice to create a separate mod for a town that you want to create. That way, if anything goes wrong when building the town (which is rare, but can happen), you won't have messed up the rest of your mod.</li>
					</ul>
					<br>
					<br>
					<h3>TIPS</h3>
					<br>
					<ul>
						<li>You can list the references to things to see where they're used by right-clicking and selecting 'list references'. For instance, if you've got a dialouge packet and you want to see who uses it, this is how you'd find out.</li>
						<li>If you're stumped as to how to do something that you know is in the game, then find the thing you want to do and pull it apart</li>
						<li>You can freely mess around with variables to see what they do, either by creating a separate mod with no other purpose, or by using the changes list and right-clicking, selecting 'revert' when you're done.</li>
						<li>If you're still stumped for an answer, ask around. You have plenty of options - Kenshi subreddit, Steam forums, Lo-fi forums (Kenshi developer), Kenshi Discord channel, THIS guide (comments), etc</li>
						<li>If you STILL can't get an answer, then you can try and test things out for yourself. For instance, for dialogue, it is good to make a full packet that tests a variety of triggers and conditions, reporting no other dialogue other than what is happening. More on that in the guide.</li>
					</ul>
					<br>
					<br>
					<h3>STARTING THE FORGOTTEN CONSTRUCTION SET (FCS)</h3>
					<br>
					<br>
					<p>The FCS is a program with which you can alter Kenshi's game data. To start it, you can either:</p>
					<ul>
						<li>Start the game from Steam and select 'Launch Game Editor'</li>
						<li>Navigate to the Kenshi directory and launch the FCS from there
(.../steam/steamapps/common/Kenshi)</li>
					</ul>
					<p>Then, you'll want to create a NEW MOD. For now, fill in a name, like 'TUT_test mod', click 'done' and leave it at that.</p>
					<p><em class="underlined">If you have an error message listing missing dialogue references, ignore it. It's some missing data from the lastest patch, but doesn't cause any issues.</em></p>
					<img src="Opening new mod.png" alt="Annotated Screenshot of the New Mod Dialogue in FCS"/>
				</section>
				<section>
					<h2 id="userinterface">FCS: User Interface</h2>
					<blockquote class="portrait-left">
						<img src="drone1.png" alt="Portrait of Boron, a Hive Drone"/>
						<p>
							Not bad so far, ey?
						</p>
					</blockquote>
					<br/>
					<br/>
					<br/>
					<h3>USER INTERFACE</h3>
					<br/>
					<br/>
					<p>The interface can look muddled and daunting when you're first using it. Let's break it down and demystify it a bit.</p>
					<img src="FCS1.png" alt="Annotated Screenshot of the FCS Interface with Menu Items Labelled"/>
					<br/>
					<br/>
					<ol class="alphalist dashmarker" type="A">
						<li>CHANGES. Here you can see all the changes that the current mod makes.</li>
						<li>CLEANUP. Get rid of unnecessary properties. Good for when you're done.</li>
						<li>ARTIFACTS. Global artifact settings. Essentially a giant inventory list detailing what loot items can be found, and how many. It's set to a couple of each kind of sword in edgewalker quality, and so on. Can also change numbers of AI cores, science books, etc, or add more artifacts if you wanted a legendary, randomly-spawning sword, or something.</li>
						<li>GLOBAL SETTINGS. Change global stuff here - xp rates, player faction size, economy balance, combat balance, and so on.</li>
						<li>WORKSHOP. Upload your stuff from here.</li>
						<li>OPEN; SAVE: Fairly self-explanatory. Remember to save often!</li>
					</ol>
					<br/>
					<img src="FCS2.png" alt="Annotated Screenshot of the FCS Interface with Game World Items Labelled"/>
					<br/>
					<br/>
					<ol class="alphalist dashmarker" type="A" start="6" style="--ol-start: 6">
						<li>Stuff in the category selected. In this case, buildings.
							<ol class="numberlist sublist">
								<li>Name and other qualities. Can be used to sort things.</li>
								<li>Search bar. Search for stuff here.</li>
							</ol>
						</li>
						<li>Navigation panel. See below.</li>
					</ol>
					<br/>
					<h3>NAVIGATION PANEL</h3>
					<br/>
					<br/>
					<p>The navigation panel lists everything that makes up the game's content. Most of the entries should be fairly self-explanatory, but here are the less-obvious ones detailed:</p>
					<dl>
						<dt>Dialogue Package</dt><dd>all the dialogue stuff is in here. See the dialogue section.</dd>
						<dt>Biomes</dt><dd>data about biomes. Also triggers unique dialogue on entry - used for comments about affairs ('We're in CANNIBAL territory?!'), reactions to world events ('Holy Phoenix is dead! Yay!') and ambient dialogue ('I'm hankering for some dried gristle flaps right now...')</dd>
						<dt>Vendor Lists</dt><dd>inventories for traders, who will generate their trader inventories based on their assigned vendor lists</dd>
						<dt>AI Packages</dt><dd>One or multiple AI goals that can be given to units or assigned temporarily or permanently. For instance, a 'shopkeeper' has a package that tells the squad leader (trader) to protect allies, lock the shop, do 'shopkeeper', go to bed at some time, get out of bed in trouble, etc. AI packages split tasks into Leader and Squad/Squad2 (a single leader can in essence have two separately-functioning squads). Pretty much everything the AI actually does in-game is done with AI packages, so get used to them!</dd>
						<dt>Colour Scheme</dt><dd>added to factions or characters to modify their clothing colours. Note that it won't work with all clothing items. Good for making uniforms if you don't want to add extra items.</dd>
					</dl>
					<br/>
					<br/>
					<h3>LISTING REFERENCES</h3>
					<br/>
					<br/>
					<p>To see what other things make use of a character, bit of dialogue, ai package, building, or whatever, simply right-click and select 'list references':</p>
					<br/>
					<br/>
					<img src="Referencing.png" alt="Screenshot of the List References Command in agnu1's Context Menu"/>
					<br/>
					<br/>
					<h3>CREATING OR COPYING STUFF</h3>
					<br/>
					<br/>
					<p>To create or duplicate something, right-click and select 'new item' where you want it or 'duplicate item'. You can't duplicate dialogue, or anything dialogue-related (sadly), but everything else is fair game. Copying and altering is the easiest way of creating your own content - but don't rely on it too strongly. Get used to why things work the way they do, and you'll have a much better modding experience.</p>
					<br/>
					<br/>
					<img src="Create New Duplicate.png" alt="Screenshot of the New Item Command In Beep's Context Menu"/>
					<br/>
					<br/>
				</section>
				<section>
					<h2 id="modifyingglobalstuff">FCS: Modifying Global Stuff</h2>
					<br/>
					<blockquote class="portrait-left">
						<img src="drone1.png" alt="Portrait of Boron, a Hive Drone"/>
						<p>
							Remember to recommend Boron's Authentic Kenshi Modding Tutorial to your friends, human!
							<br/>
							You have friends, yes?
						</p>
					</blockquote>
					<br/>
					<blockquote class="portrait-left">
						<img src="drone1.png" alt="Portrait of Boron, a Hive Drone"/>
						<p>
							If not, do not worry! Boron is your friend!
						</p>
					</blockquote>
					<br/>
					<br/>
					<h3>MODIFYING ARTIFACTS</h3>
					<br/>
					<br/>
					<p>So, you want to put more legendary swords in the game? Easy! Open artifacts, and add a sword or change a value:</p>
					<br/>
					<img src="Artifacts1.png" alt="Annotated Screenshot of the Artifacts Window in FCS"/>
					<br/>
					<br/>
					<img src="Artifacts2.png" alt="Annotated Screenshot of the Add Function for the armours Artifact Group"/>
					<br/>
					<br/>
					<ol class="alphalist dashmarker" type="A" start="3" style="--ol-start: 4">
						<ol class="numberlist sublist">
							<li>TYPE of thing (armour, weapon, etc)</li>
							<li>Add it</li>
							<li>Add new thing of this type</li>
							<li>Search for something</li>
						</ol>
					</ol>
					<br/>
					<br/>
					<img src="Artifacts3.png" alt="Annotated Screenshot of a Custom Armour Artifact"/>
					<br/>
					<br/>
					<blockquote class="portrait-left">
						<img src="drone1.png" alt="Portrait of Boron, a Hive Drone"/>
						<p>
							Green text means it's added by your mod!
						</p>
					</blockquote>
					<br/>
					<br/>
					<h3>MODIFYING GLOBAL SETTINGS</h3>
					<p>Simply change whatever numbers you feel like. Go ahead, try it out in your test mod, load up a game, and see what's different. Black values are the game's default and are treated as factors. Changing the global healing rate from '0.25' to '0.5', for instance, will double the base healing rate (i.e. when applying first aid)</p>
					<br/>
					<br/>
					<img src="Global Settings 1.png" alt="Annotated Screenshot of the Global Constants Window"/>
					<br/>
					<br/>
					<ol class="alphalist dashmarker" type="A" start="4" style="--ol-start: 5">
						<ol class="numberlist sublist">
							<li>Minimum lockpicking chance ( &lt; this % you can't attempt), how much you'll get back from dismantling resources. Also skeleton files (for character skeletons, not the in-game race)</li>
							<li>Combat balance stuff</li>
						</ol>
					</ol>
					<br/>
					<br/>
					<img src="Global Settings 2.png" alt="Annotated Screenshot of the Global Constants Window (scrolled down midway)"/>
					<br/>
					<br/>
					<br/>
					<br/>
					<img src="Global Settings 3.png" alt="Annotated Screenshot of the Global Constants Window (scrolled down all the way)"/>
					<br/>
					<br/>
				</section>
				<section>
					<h2 id="dialogueoverview">Dialogue: Overview</h2>
					<br/>
					<blockquote class="portrait-left">
						<img src="drone1.png" alt="Portrait of Boron, a Hive Drone"/>
						<p>
							Now we get to the good stuff! Oh, yesss, /OUTLANDER/!
						</p>
					</blockquote>
					<br/>
					<blockquote class="portrait-left">
						<img src="drone3.png" alt="Portrait of a Hive Drone"/>
						<p>
							Would you SHUT IT already, exile!
						</p>
					</blockquote>
					<br/>
					<blockquote class="portrait-left">
						<img src="drone1.png" alt="Portrait of Boron, a Hive Drone"/>
						<p>
							Hey!
						</p>
					</blockquote>
					<br/>
					<br/>
					<br/>
					<h3>DIALOGUE OVERVIEW</h3>
					<p><em>So how do we actually WRITE dialogue?</em></p>
					<p>Let's take a look at the dialogue system more closely:</p>
					<br/>
					<!--<img class="floatLeft" src="Dialogue 1.png" alt="Cropped Screenshot of the FCS Root Directory with Dialogue Package Expanded"/>-->
					<dl>
						<div style="grid-column: 3; grid-row: span 6; width: 173px; background: no-repeat url('Dialogue 1.png');" title="Cropped Screenshot of the FCS Root Directory with Dialogue Package Expanded"></div>
						<dt>DIALOGUE PACKAGE</dt><dd>The finished product. This is what you give to NPCs to make them speak. A dialogue package is a combination of 'dialogue' with particular 'events' (triggers). Characters can have multiple dialogue packages, and dialogue can inherit from other packages (meaning to make an npc speak, just give him the NPC TOUGH Merc package, which includes other stuff. Examine in FCS for details).</dd>
						<dt>DIALOGUE</dt><dd>Dialogue. Has a single root, and as many branches as you want. Usually related to ONE thing (e.g. 'dialogue for when player attacks me'). You write dialogue, and then use it in the packages.</dd>
						<dt>WORDSWAPS</dt><dd>/QUICKLAUGH/! Wordswaps are FANTASTIC. Anything written in capital letters between '/ /' is a wordswap - where the fcs swaps out /QUICKLAUGH/ (or whatever) for the terms you specify in the swap. Look at some wordswaps for examples - an extended section on the potential of this system will come in a later guide. SINGLE LINE ONLY!</dd>
						<dt>WORLD STATES</dt><dd>Is &lt;NPC&gt; dead? Alive? In prison? Is the player allied to/hated by a faction? Is a town okay/destroyed? You can use these universal conditions to trigger a variety of things, such as dialogue when an important NPC dies (see 'biome entry - longen world state' in dialogue for exampe), or a raid if the player imprisons somebody important (like captain Eyegore)</dd>
						<dt>___LINES</dt><dd>The FCS stores each line of dialogue here. You don't need to use it, as you can access dialogue through the dialogue packages and dialogue tabs. </dd>
					</dl>
					<br/>
					<br/>
				</section>
				<section>
					<h2 id="dialogueexercises">Dialogue: Exercises</h2>
					<br/>
					<h3>EXERCISES</h3>
					<p>Time for something hands-on. A lot of what you need to know about dialogue is in the mod. Open it in the fcs, and look under 'dialogue packages' for "Boron's Tutorial". Open it, and look under 'I_SEE_NEUTRAL' (left)</p>
					<p>If you don't have the mod, it's under this <a href="NewTownsMod.zip">link</a>.</p>
					<p>Dialogue packages consist of several parts:</p>
					<br/>
					<img src="Dialogue Packets.png" alt="Annotated Screenshot of the Dialogue Package Window in FCS"/>
					<br/>
					<br/>
					<dl>
						<dt>for enemies</dt><dd>enables the dialogue if the characters are enemies. You could use it to make a 'diplomat' character (like a pacifier) with whom the character can interact despite being enemies. Or if the player should be able to beg for mercy, or something.</dd>
						<dt>monologue</dt><dd>'true', unless it's a PLAYER_TALK_TO event (even then I think you don't have to set it to false - need verification on that)</dd>
						<dt>chance permanent</dt><dd>change that any given character actually HAS this dialogue after it being assigned, in %. For instance, if you add a 'Random crazy attack' dialogue packet to a bandit, and set chance_perm to 20, then only one out of every five of those bandits is gonna yell 'RARRRHHGHGH!' and then charge, or w/e</dd>
						<dt>chance temporary</dt><dd>chance a character will use a line when available. </dd>
						<dt>Repetition limit</dt><dd>how often this line can be repeated. Affects entire dialogue, if you set it at the root. Number in-game hours; SHORT = 2, MEDIUM = 6, LONG = 48 (2 days), 1 WEEK = 1 week, VSHORT = 20 minutes; ONCE ONLY = once only, EVER</dd>
						<dt>Score bonus</dt><dd>make the line a priority, will then be chosen if other lines are available</dd>
						<dt>Target is type</dt><dd>usually leave this as OT_NONE, but you can set a target type (look up characters; right at the bottom is 'fundamental type' which lists the type) so that it only triggers on a specific target type. For instance, you might use it with bandits and some kind of 'Get her!' dialogue, but target only OT_ADVENTURER and not OT_LAW_ENFORCEMENT or OT_MILITARY. Should be obvious why...</dd>
					</dl>
					<br/>
					<br/>
					<h3>FINDING THE TUTORIAL</h3>
					<p>Open the mod in the fcs, navigate to 'dialogue packages', then search for 'Boran's Tutorial'. Inside the packet you'll find several things under I_SEE_NEUTRAL</p>
					<dl>
						<dt>EXAMPLES</dt><dd>Look here first. Split into three parts (basic, advanced), each line demonstrates something the system can do.</dd>
						<dt>WHAT DOES THIS DO?</dt><dd>explains what the current trigger does. <em>NOTE: Will add explanations for most other triggers (that are implemented) so that you can look everything up in one place.</em></dd>
						<dt>EXERCISE SET #1 AND #2</dt><dd>Exercises where you fill out conditions, add interjector nodes and correct mistakes. Answers are in this guide in Appendix B.</dd>
					</dl>
					<p>Do the stuff, then move on to the final chapter.</p>
					<br/>
					<br/>
				</section>
				<section>
					<h2 id="makingabar">Bringing it All Together: Making a Bar</h2>
					<blockquote class="portrait-right">
						<img src="drone2.png" alt="Portrait of Gorax, a Hive Drone"/>
						<p>
							I'm sure he'll shut his mouth slit soon, human...
						</p>
					</blockquote>
					<br/>
					<blockquote class="portrait-left">
						<img src="drone1.png" alt="Portrait of Boron, a Hive Drone"/>
						<p>
							Silence, now, Gorax. You're distracting the human!
						</p>
					</blockquote>
					<br/>
					<br/>
					<br/>
					<h3>IN-GAME EDITOR QUICK GUIDE</h3>
					<br/>
					<p>A more in-depth guide to using the in-game town editor will come in a later tutorial. For now, I'll explain the basics.</p>
					<img src="Editor Shortguide.png" alt="Screenshot of the In-Game Cheat Menu"/>
					<br/>
					<dl>
						<dt>TOWN PLACEMENT</dt><dd>Displays a list of all towns under 'towns' in the fcs (...duh). Unplaced towns (including yours) are highlighted red and nearly unreadable. You can do a text search at the bottom of the panel.</dd>
						<dt>RESET POPULATION</dt><dd>Uh, resets the...um...population. I pressed this ONCE, and everybody disappeared. FOREVER. Gone. So, don't play with that button without at least THREE supervising super-modders.</dd>
						<dt>BUILDINGS</dt><dd>Lets you build stuff, same as in game, but with a few changes: 1) you can build a whole lot more; 2) you can build stuff even where it's 'forbidden' (red); 3) you can hit 'B' right after placing everything to insta-build it. NOTE: You have to be OUT of build mode in order to adjust or delete things you've built!</dd>
						<dt>ITEMS</dt><dd>Lets you place respawnable items. Look in the fcs under items-&gt;placeable groups to make your own. This is good for littering ruins with specific loot items - for instance, all those crappy burnt books and the occasional useable one you see on the shelves in Lost Libraries. NOTE: The items you place aren't owned, so don't use them to litter junk around bars, shops, and whatnot.</dd>
						<dt>FIX STUFF</dt><dd>Fixes stuff. With magic Kenshi dust. Good to do before you finish-up. Healthy for the engine's bones.</dd>
						<dt>NAVMESH TOOLS</dt><dd>I dunno.</dd>
						<dt>TERRAIN</dt><dd>Terrain that you place doesn't save to mods, but to your local save game - as far as I've been able to tell. I would IMAGINE it's to prevent a torrential turd-rain of phallus-shaped mountains littering the wastelands...But HEY, maybe people CAN be trusted to mod the terrain?</dd>
						<dt>TERRAIN FOG</dt><dd>I dunno.</dd>
						<dt>SAVE/EXIT</dt><dd>One exits, the other saves. If you can't figure out which is which, don't mod Kenshi. NOTE: Make SURE you're saving to the right mod! ABSOLUTELY SURE! It's best to load only one mod (and make the 'town' item in the same mod) so that you don't accidentally /♥♥♥♥♥♥♥♥/ up- but if you ignore this warning and LOSE. EVERYTHING. Then.../MERCLAUGH/...</dd>
					</dl>
					<blockquote class="portrait-right">
						<img src="drone2.png" alt="Portrait of Gorax, a Hive Drone"/>
						<p>
							Make the /DAMN/ bar, already, I want to get drunk!
						</p>
					</blockquote>
					<br/>
					<h3>MAKING A WAYWARD BAR</h3>
					<p>Enough with the exercises. Let's do something cool. We're going to make a new town with a single building (a bar), add several bar patrons, guards, and a barkeeper with some unique dialogue that is different based on the player's race. Then we shall make a new game start that puts us at the bar. And then? </p>
					<p>Well, then, a Shek; a Hiver; and a Skeleton all walked into a bar...</p>
					<p>...and it's your job to write the punchline.</p>
					<p>Let's break it down in steps:</p>
					<ol class="numberlist parenmarker">
						<li>
							<p>Make a new mod that's just for the town. We can merge them at the end.</p>
						</li>
						<li>
							<p>Make a new town in the FCS. Look at the screenshot below for guidance. We'll actually ADD people later on...</p>
							<img src="Bar Tut Step 2.png" alt="Annotated Screenshot of Town Creation in FCS"/>
						</li>
						<li>
							<p>Now, open Kenshi (running the new mod only!), find somewhere suitable for a bar, reasonably far from other towns.</p>
							<img src="Bar Tut Step 3.png" alt="Screenshot of the Kenshi Launcher's Mods Tab with the NewTownsMod Selected"/>
							<ol class="alphalist parenmarker lower-alphalist sublist">
								<li>
									<p>Press Shift+F12 to open the in-game editor. I recommend changing the shortcut, as F12 is Steam's hotkey for taking a screenshot. Shift+F11 has no issues; it's what I use.</p>
								</li>
								<li>
									<p>*VERY* IMPORTANT: Above the 'Save' and 'Exit' buttons is a drop-down list. Assuming you're ONLY running the new mod you just made (which you should be), there should only be that option in the list. Click it. You'll have to do this EVERY time you open the in-game editor, so be sure to make it a priority habit.</p>
									<img src="Bar Tut Step 3b.png" alt="Screenshot of the Mod Drop-Down List in Kenshi's In-Game Editor"/>
								</li>
							</ol>
						</li>
						<li>
							<p>Click on 'town placement'</p>
							<img src="Bar Tut Step 4.png" alt="Screenshot of Kenshi's In-Game Editor After Clicking Town Placement"/>
						</li>
						<li>
							<p>Place the town marker. IMPORTANT: ONCE IT'S PLACED, IT'S PLACED. It is very difficult (read that as 'I have been unable to') move a town marker once it's placed, so be SURE. That's also partly why we're making this town in its own mod.</p>
							<img src="Bar Tut Step 5.png" alt="In-Game Screenshot of the Map Depicting Boron's Bar"/>
							<p>Here we go! (The text is red because we haven't assigned a faction, yet.)</p>
							<p>EDIT: I've had crashes with various towns when trying to load them without a faction assigned. So, assign a faction in the fcs!</p>
						</li>
						<li>
							<p>Close town placement, open 'buildings'. You'll find a menu the same as for players in-game, but with a lot more stuff. Pick something for a bar.</p>
						</li>
						<li>
							<p>Place it wherever. IMPORTANT: With the in-game editor, you can place items even if the marker is red. You can also adjust anything later on.</p>
							<img src="Bar Tut Step 7.png" alt="In-Game Screenshot of the Bar Being Placed In-Game"/>
						</li>
						<li>
							<p>I'm going to pick 'bar' as my layout. It looks fine.</p>
							<img src="Bar Tut Step 8.png" alt="In-Game Screenshot of the Bar 'Outpost' and its Layout Dialogue"/>
							<p>However, the bar sign looks a little...bleak.</p>
							<img src="Bar Tut Step 8_2.png" alt="In-Game Screenshot of the Bar Sign with Translation Controls"/>
							<p>Much better! I did this by enabling 'interior edit', turning off 'show interior' and then placing the sign outside. Then I saved it as a new exterior, which will let the bar squad (Boron the barman and some guards) identify the building.</p>
							<ol class="alphalist parenmarker lower-alphalist">
								<li>
									<p>HOW TO EDIT INTERIOR LAYOUTS - Make sure both 'Interior edit mode' and 'show interior' are highlighted. Select a pre-made layout, change, and save it under a new name if you want.</p>
									<img src="Bar Tut Step 8a.png" alt="Clipped In-Game Screenshot Highlighting the Interior Layouts Button"/>
									<p>You'll know you're doing it RIGHT if you still have the layout panel on-screen when you're in build mode:</p>
									<img src="Bar Tut Step 8a_2.png" alt="In-Game Screenshot of Build Mode After Selecting Interior Layout"/>
								</li>
								<li>
									<p>HOW TO EDIT EXTERIOR LAYOUTS - Do the same as for interior layouts, but leave 'show interior' unchecked.</p>
								</li>
							</ol>
						</li>
						<li>
							<p>Save and exit Kenshi, and open the fcs again.</p>
						</li>
						<li>
							<p>Create a new faction. In this case, I'm adding a trade culture, which prevents certain items from spawning and alters some prices.</p>
							<img src="Bar Tut Step 10.png" alt="FCS Screenshot of a custom Faction Dialogue"/>
							<br/>
							<img src="Bar Tut Step 10_2.png" alt="FCS Screenshot of the swamper Faction Dialogue"/>
						</li>
						<li>
							<p>Next I'm gonna make Boron and Gorax, two hiver guys. Gorax is getting some generic npc dialogue. Boron is, too - so that he can react to various things, like being in combat, being imprisoned, and so on, but he's also getting his own dialogue package. Go into the tutorial mod and look it up to see what's inside.</p>
							<img src="Bar Tut Step 11.png" alt="FCS Screenshot Depicting the Creation of Boron and Gorax NPCs"/>
						</li>
						<li>
							<p>Boron and Gorax go in a squad together. The leader can interact with the player via PLAYER_TALK_TO events, so leaders are often diplomats, barmen, traders, or even their own squad (for recruits in bars, for instance).</p>
							<img src="Bar Tut Step 12.png" alt="FCS Screenshot of the Boron's Bar SQUAD_TEMPLATE with Boron and Gorax Added to the squad Field"/>
						</li>
						<li>
							<p>Nearly done! Now I just need to tweak the town I made earlier...</p>
							<img src="Bar Tut Step 13.png" alt="FCS Screenshot of the Boron's Bar TOWN with the Boron's Bar SQUAD_TEMPLATE Added to the residents Field"/>
						</li>
						<li>
							<p>And add a new game start...</p>
							<img src="Bar Tut Step 14.png" alt="FCS Screenshot of the Boron's Bar NEW_GAME_STARTOFF"/>
						</li>
						<li>
							<p>And done! Now it can be tested! Load the mod, and select 'Boron's Bar' as the new game start to see in-action.</p>
						</li>
					</ol>
					<br/>
				</section>
				<section>
					<h2 id="appendixa">Appendix A: Assigning Squads to Buildings and Giving them Layouts</h2>
					<blockquote class="portrait-left">
						<img src="drone1.png" alt="Portrait of Boron, a Hive Drone"/>
						<p>
							Ah, yes, the appendix! Most highest quality, human! I tested it myself!
						</p>
					</blockquote>
					<br/>
					<br/>
					<h3>SIDE-NOTE: HOW BUILDINGS AND ASSIGNED SQUADS INTERACT</h3>
					<br/>
					<br/>
					<p>This one took me a while to quite figure out.</p>
					<p>When you make a town, you fill it with buildings. If you click on a building in the editor, you can load interior and exterior layouts. The interior is the meaty stuff - furniture, crates, barrels, chairs, beds, etc. Extrior is just for signs, usually, and also helps the fcs differentiate between buildings.</p>
					<p>What you're doing here is NOT picking a layout for the building. Instead, you're loading one of the existing layouts in order to tweak it. So, if you want to make a bar, click on a building and then on the 'bar' layout. If it's not to your liking, edit it with 'interior build mode' enabled, and then save it under a new name.</p>
					<p>Whatever you do, note down, letter-for-letter, the names of the interior and exterior layouts that you want. You'll THEN find a squad you want to inhabit the building, write the names of the layouts in the squad, change anything about the squad that relates to the building (like is_trader; vendors for junk or trader inventories; $ value of random junk lying around; public/private; etc). Then, by adding the squad as a resident to the TOWN, the squad will automatically locate a building where both the exterior layout name matches their assigned one, and bring the layout with them.</p>
					<p>(Note: I'm unsure whether a squad needs both interior and exterior layouts to match, or whether it's just exterior, but I think it's the latter.)</p>
					<p>Thus, it is possible both to create a town in which the building inhabitants shuffle with each new game, but it's also possible to specify particular buildings for everybody. If you need a good example, look at how it works across the following files:</p>
					<p>TOWN: "Shark"</p>
					<p>FACTION-&gt;SQUADS: "the dancing skeleton" &amp; "blsh casino guy"</p>
					<img src="Making Bar.png" alt="Screenshot of the TOWN Shark in FCS"/>
					<br/>
					<br/>
				</section>
				<section>
					<h2 id="appendixb">Appendix B: Exercise Answer Sheet</h2>
					<blockquote class="portrait-right">
						<img src="drone2.png" alt="Portrait of Gorax, a Hive Drone"/>
						<p>
							Here are the answers to your...ugh, do I *have* to do this?
						</p>
					</blockquote>
					<p>EXERCISE SET #1</p>
					<ol class="numberlist parenmarker">
						<li>
							<p class="blackout">T_ME DC_IS_FEMALE == 1</p>
						</li>
						<li>
							<p class="blackout">
								for int1: add 'has package': Player RONIN Hiver, Player THUG, Player CIVILIAN, Player TOUGH merc; add 'my race' for the hive races (both normal and south)
								<br/>
								for int2: add lots of 'has packages', and T_ME DC_HAS_PERSONALITY_TAG == 1 for 'DUMB'
							</p>
						</li>
						<li>
							<p class="blackout">3 conditions on T_ME - DC_IS_SLAVE==0, DC_IS_IMPRISONED==0, DC_IS_KO==0</p>
						</li>
						<li>
							<p class="blackout">T_ME DC_I_HATE_THIS_GUY == 1</p>
						</li>
						<li>
							<p class="blackout">T_ME DC_SQUAD_SIZE > 4</p>
						</li>
						<li>
							<p class="blackout">T _TARGET DC_IS_IMPRISONED == 1</p>
						</li>
						<li>
							<p class="blackout">
								first line: T_ME DC_IS_PLAYER == 1
								<br/>
								second line: T_ME DC_IS_FEMALE == 1
								<br/>
								third line: don't need a conditoin
								<br/>
								shift-drag line 3 on to other two
							</p>
						</li>
						<li>
							<p class="blackout">
								blue (int1) interjector node between lines 1 & 2
								<br/>
								green (int2) interjector node between lines 2 & 3 (both branches)
								<br/>
								light blue (int3) node between line 3, branch 1 and line 4
								<br/>
								also race + has package checks
							</p>
						</li>
					</ol>
					<p>EXERCISE SET #2</p>
					<p>WIP. I'll get around to this in a day or two...</p>
				</section>
				<section>
					<h2 id="appendixc">Appendix C: A Proper Example</h2>
					<p>Here are some proper examples of dialogue.</p>
					<img src="Example 1.png" alt="Screenshot of LA_CharacterCombos Squad Dialogue in FCS (1 of 3)"/>
					<br/>
					<br/>
					<img src="Example 2.png" alt="Screenshot of LA_CharacterCombos Squad Dialogue in FCS (2 of 3)"/>
					<br/>
					<br/>
					<img src="Example 3.png" alt="Screenshot of LA_CharacterCombos Squad Dialogue in FCS (3 of 3)"/>
					<br/>
					<br/>
					<img src="Example 4.png" alt="In-Game Screenshot"/>
					<br/>
					<br/>
				</section>
			</article>
		</main>
		<footer>
			<img  id="footerLogo" src="../../../../static\site-styles\valve\valve.png" alt="Valve Logo"/>
			<small id="footerText">
				© Valve Corporation. All rights reserved.<br/>
				All trademarks are property of their respective owners in the US and other countries.
			</small>
		</footer>
	</body>
</html>
